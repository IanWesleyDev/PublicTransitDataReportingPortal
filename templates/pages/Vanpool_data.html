{% extends 'index.html' %}
{% load custom_tags %}

{% block content %}

    <div class="container h-100" style="max-width: none">
        <!-- Page Heading -->
        <div class="card shadow h-100" style="max-width: none">
            <div class="card-header">
                <form action="{% url 'Vanpool_data' %}" method="post">
                    {% csrf_token %}
                    <p>
                        <button class="btn btn-primary" type="button" data-toggle="collapse" href="#multiCollapseExample1" aria-expanded="false" aria-controls="multiCollapseExample1">Change Chart Measure</button>
                        <button id="SelectOrg" class="btn btn-primary" type="button" data-toggle="collapse" data-target="#multiCollapseExample2" aria-expanded="false" aria-controls="multiCollapseExample2">Select Transit Agencies</button>
                        <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#multiCollapseExample3" aria-expanded="false" aria-controls="multiCollapseExample2">Change Chart Time Frame</button>
                        <input  class="btn btn-success" type="submit" value="Update Chart" style="float: right">
                    </p>
                    <div class="collapse multi-collapse" id="multiCollapseExample1">
                        <div class="card card-body" style="">
                            {{ form.chart_measure }}
                        </div>
                    </div>

                    <div class="collapse multi-collapse" id="multiCollapseExample2">
                        <div class="card card-body" >
                            <div class="form-group" id="bullet-kill" >{{ form.chart_organizations }}</div>
                        </div>
                    </div>

                    <div class="collapse multi-collapse" id="multiCollapseExample3">
                        <div class="card card-body" >
                            <div class="form-group" ><fieldset >{{ form.chart_time_frame }}</fieldset></div>
                        </div>
                    </div>

                </form>
            </div>

            <div class="card-body d-flex flex-grow-1">

                <div class="container" style="max-width: none !important;min-width:100px; min-height:100px">
                    <canvas id="myChart" style="width:100% !important; height:100% !important;" >

                    </canvas>
                </div>
            </div>
        </div>
    </div>





{% endblock %}

{% block page_scripts %}

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

    <script type="text/javascript">
        var chart;
        var ctx = document.getElementById('myChart').getContext('2d');
        var chart = new Chart(ctx, {
            // The type of chart we want to create
            type: 'line',


            // The data for our dataset
            data: {
                labels: {{ chart_label | safe }}, //[1, 2, 3,4,5,6,7,8,9,10,11,12], //
                datasets: [
                    {% for key, value in chart_datasets_filtered.items %}
                        {
                            label: "{{ key | safe }}",
                            borderColor: "{{ value | get_chart_dataset_color | safe }}",
                            fill: false,
                            data: {{ value | get_chart_dataset_data | safe }}
                        },
                    {% endfor %}
                ]
            },

            // Configuration options go here
            options: {
                responsive:'true',
                maintainAspectRatio: 'false',
                title: {
                    display: true,
                    text: '{{ chart_title }}'
                },
                lineTension: .2,
                layout: {
                    padding: {
                        left: 0,
                        right: 0,
                        top: 0,
                        bottom: 0
                    }
                }
            }
        });
$(document).ready(function(){
    if (document.documentMode || /Edge/.test(navigator.userAgent)) {
        $('ul:hidden').each(function(){
            $(this).parent().append($(this).detach());
        });
    }
});
{#        $(document).ready(function ($) {#}
{#            $('ul').css('list-style-type', 'none');#}
{#               $('ul').css('list-style', 'none');#}
{##}
{#        });#}
{##}
{#        $('#multiCollapseExample2').on('shown.bs.collapse', function () {#}
{#            if(!$('ul').css('list-style') === 'none')#}
{#            {#}
{#                $('ul').css('list-style-type', 'none');#}
{#                $('ul').css('list-style', 'none');#}
{##}
{#            }#}
{#            else#}
{#            {#}
{#                 $('ul').css('list-style-type', 'none');#}
{#$('ul').css('list-style', 'none');#}
{##}
{#            }#}
{#        })#}


    </script>



{% endblock %}